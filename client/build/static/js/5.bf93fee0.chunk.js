webpackJsonp([5],{686:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),u=n.n(i),o=n(24),s=n(688),l=n(844),p=n(845),f=n(846),m=n(699),d=n(719),g=n(847),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),v=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={page:1},n.nextPage=n.nextPage.bind(n),n.previousPage=n.previousPage.bind(n),n.submitCampaignForm=n.submitCampaignForm.bind(n),n}return c(e,t),h(e,[{key:"componentDidMount",value:function(){var t=this.props;(0,t.fetchGroups)(t.groups,t.limit,t.offset,t.query)}},{key:"nextPage",value:function(){this.setState({page:this.state.page+1})}},{key:"previousPage",value:function(){this.setState({page:this.state.page-1})}},{key:"submitCampaignForm",value:function(t){console.log("VALUES",t),console.log("LISTINGS",this.props.campaignListings),console.log("GROUPS",this.props.campaignGroups)}},{key:"render",value:function(){var t=this,e=this.props,n=e.campaign,r=e.campaignListings,a=e.searchCampaignListings,c=e.campaignListingsSearchResults,i=e.groups,o=e.campaignGroups,d=(e.campaignGroupsSearchResults,this.state.page);return u.a.createElement("div",null,u.a.createElement(s.a,null),u.a.createElement("div",null,1===d&&u.a.createElement(l.a,{campaignListings:r,campaign:n,searchCampaignListings:a,campaignListingsSearchResults:c,submitCampaignListing:m.d,deleteCampaignListing:m.a,nextPage:this.nextPage}),2===d&&u.a.createElement(p.a,{campaign:n,campaignListings:r,nextPage:this.nextPage,prevPage:this.previousPage}),3===d&&u.a.createElement(f.a,{campaign:n,groups:i,campaignGroups:o,submitCampaignGroup:g.b,deleteCampaignGroup:g.a,nextPage:this.nextPage,prevPage:this.previousPage,onSubmit:function(e){t.submitCampaignForm(e)}})))}}]),e}(u.a.Component),b=function(t){return{groups:t.groupReducer.groups,limit:t.groupReducer.limit,offset:t.groupReducer.offset,query:t.groupReducer.query,campaignListings:t.campaignReducer.campaignListings,campaignListingsSearchResults:t.campaignReducer.campaignListingsSearchResults,campaignGroups:t.campaignReducer.campaignGroups}},y={fetchGroups:d.e,searchCampaignListings:m.b};e.default=Object(o.b)(b,y)(v)},687:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,c){try{var i=e[a](c),u=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}function a(t){return{type:f.p,payload:t}}e.k=a,n.d(e,"h",function(){return h}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return b}),n.d(e,"a",function(){return x}),n.d(e,"j",function(){return E}),n.d(e,"g",function(){return C}),n.d(e,"f",function(){return w}),n.d(e,"l",function(){return A}),n.d(e,"m",function(){return O}),n.d(e,"d",function(){return k}),n.d(e,"i",function(){return R}),n.d(e,"e",function(){return S});var c=n(256),i=n.n(c),u=n(255),o=n.n(u),s=n(139),l=n(698),p=n(699),f=n(23),m=this,d=function(t,e,n,r){return{type:f.L,listings:t,limit:e,offset:n,query:r}},g=function(t){return{type:f.K,payload:t}},h=function(t){return{type:f.o,isFetching:t}},v=function(){return{type:f.k}},b=function(){return{type:f.l}},y=function(t){return{type:f.G,error:t}},x=function(){return{type:f.h}},E=function(t,e,n,a,c){return function(){var t=r(i.a.mark(function t(r){var u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get("/api/listings/?limit="+e+"&offset="+n+"&query="+a);case 3:u=t.sent,"contactListings"===c&&r(Object(l.e)(u.data)),r("campaignListings"===c?Object(p.c)(u.data):d(u.data,e,e,null)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("fetchContacts ERROR",t.t0.response),r(y("ERROR FETCHING CONTACTS"));case 12:case"end":return t.stop()}},t,m,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},C=function(t,e,n,a){return function(){var c=r(i.a.mark(function r(c){var u,s;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return c(h(!0)),u=n+e,r.prev=2,r.next=5,o.a.get("/api/listings/?limit="+e+"&offset="+n+"&query="+a);case 5:s=r.sent,c(d(t.concat(s.data),e,u,a)),c(h(!1)),r.next=15;break;case 10:r.prev=10,r.t0=r.catch(2),console.error("fetchListings unsusccessful",r.t0.response),c(h(!1)),c(y("ERROR FETCHING LISTINGS"));case 15:case"end":return r.stop()}},r,m,[[2,10]])}));return function(t){return c.apply(this,arguments)}}()},w=function(t){return function(){var e=r(i.a.mark(function e(n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(h(!0)),e.prev=1,e.next=4,o.a.get("/api/listings/"+t);case 4:r=e.sent,n(g(r.data)),n(h(!1)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Fetching listing unsuccessful",e.t0),n(h(!1)),n(y("ERROR FETCHING LISTING"));case 14:case"end":return e.stop()}},e,m,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},A=function(t){return function(){var e=r(i.a.mark(function e(n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(h(!0)),e.prev=1,e.next=4,o.a.post("/api/listings/new",t);case 4:r=e.sent,n(g(r.data)),n(a(!1)),n(Object(s.b)("/listing/"+r.data.id)),n(h(!1)),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("Submitting new listing unsuccessful",e.t0),n(h(!1)),n(y("ERROR SUBMITTING NEW LISTING"));case 16:case"end":return e.stop()}},e,m,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()},O=function(t,e){return function(){var n=r(i.a.mark(function n(r){var a;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.patch("/api/listings/"+e+"/update",t);case 3:a=n.sent,r(g(a.data)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("Updating Listing Unsuccessful",n.t0);case 10:case"end":return n.stop()}},n,m,[[0,7]])}));return function(t){return n.apply(this,arguments)}}()},k=function(t){return function(){var e=r(i.a.mark(function e(n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.delete("/api/listings/"+t+"/delete");case 3:r=e.sent,n(g(r.data)),n(Object(s.b)("/listings")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Deleting Listing Unsuccessful",e.t0);case 11:case"end":return e.stop()}},e,m,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},R=function(t,e){return function(){var n=r(i.a.mark(function n(r){var a,c;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.post("/api/upload",{componentType:"listing",componentId:e});case 2:return a=n.sent,n.next=5,o.a.put(a.data.url,t[0],{headers:{"Content-Type":t[0].type}});case 5:return n.next=7,o.a.post("/api/listings/images",{images:["https://s3.amazonaws.com/leadcloud-v5-user-images/"+a.data.key],componentId:e});case 7:c=n.sent,r(g(c.data));case 9:case"end":return n.stop()}},n,m)}));return function(t){return n.apply(this,arguments)}}()},S=function(t,e){return function(){var n=r(i.a.mark(function n(r){var a;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.post("/api/listings/images/delete",{listingId:e,image:t});case 3:a=n.sent,r(g(a.data)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:case"end":return n.stop()}},n,m,[[0,7]])}));return function(t){return n.apply(this,arguments)}}()}},688:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=n(0),u=n.n(i),o=n(24),s=n(139),l=n(1),p=n.n(l),f=n(689),m=n(257),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleLogout=n.handleLogout.bind(n),n}return c(e,t),d(e,[{key:"handleLogout",value:function(){this.props.logout(),this.props.push("/")}},{key:"render",value:function(){return u.a.createElement(f.a,{logout:this.handleLogout,user:this.props.user,isAuthed:this.props.isAuthed,push:this.props.push})}}]),e}(u.a.Component),h=function(t){return{user:t.authReducer.user,isAuthed:t.authReducer.isAuthed}};g.propTypes={logout:p.a.func.isRequired,isAuthed:p.a.bool.isRequired},e.a=Object(o.b)(h,{logout:m.b,push:s.b})(g)},689:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=n(254),i=n(1),u=(n.n(i),n(253)),o=n(690),s=(n.n(o),function(t){var e=t.isAuthed,n=t.user,r=t.logout,i=t.profile,o=t.push;return a.a.createElement(u.m,{inverse:!0,className:"NavContainer"},a.a.createElement(u.m.Header,null,a.a.createElement(u.m.Brand,null,a.a.createElement(c.a,{to:"/dashboard"},"LeadCloud")),a.a.createElement(u.m.Toggle,{className:"toggle"})),a.a.createElement(u.m.Collapse,null,a.a.createElement(u.j,null,a.a.createElement(l,{isAuthed:e,push:o}),a.a.createElement(p,{isAuthed:e,push:o}),a.a.createElement(m,{isAuthed:e,push:o}),a.a.createElement(f,{isAuthed:e,push:o})),a.a.createElement(u.j,{className:"navContainerRight",pullRight:!0},a.a.createElement(d,{isAuthed:e,user:n,logout:r,profile:i,push:o}),a.a.createElement(g,{user:n,isAuthed:e}))))}),l=function(t){var e=t.isAuthed,n=t.push;return e&&a.a.createElement(u.i,{className:"menuItem",eventKey:"2",onSelect:function(){return n("/contacts")}},"Contacts")},p=function(t){var e=t.isAuthed,n=t.push;return e&&a.a.createElement(u.i,{className:"menuItem",eventKey:"3",onSelect:function(){return n("/listings")}},"Listings")},f=function(t){var e=t.isAuthed,n=t.push;return e&&a.a.createElement(u.i,{className:"menuItem",eventKey:"1",onSelect:function(){return n("/emails")}},"Messages")},m=function(t){var e=t.isAuthed,n=t.push;return e&&a.a.createElement(u.i,{className:"menuItem",eventKey:"1",onSelect:function(){return n("/campaigns")}},"Campaigns")},d=function(t){var e=t.isAuthed,n=t.user,r=t.logout,c=t.push;return e&&a.a.createElement(u.k,{className:"menuItem",eventKey:2,title:"Welcome, "+n.firstName+"!",id:"basic-nav-dropdown"},a.a.createElement(u.i,{className:"menuItem",eventKey:"3",onSelect:function(){return c("/profile")}},"Profile"),a.a.createElement(u.i,{divider:!0}),a.a.createElement(u.i,{onClick:function(){c("/"),r()},eventKey:2.4},"Logout"))},g=function(t){var e=t.isAuthed,n=t.user;return e&&a.a.createElement(c.a,{className:"navitem",to:"/profile"},a.a.createElement("div",null,a.a.createElement("img",{className:"navProfilePic",src:n.googlePhoto||null,alt:"profile pic"})))};e.a=s},690:function(t,e,n){var r=n(691);"string"===typeof r&&(r=[[t.i,r,""]]);var a={hmr:!1};a.transform=void 0;n(670)(r,a);r.locals&&(t.exports=r.locals)},691:function(t,e,n){e=t.exports=n(669)(!0),e.push([t.i,".NavContainer{margin-left:0;border-radius:0}.menuItem a{background-color:transparent!important;outline:none!important}.navProfilePic{border-radius:50%;width:32px;height:32px}.navContainerRight{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center}","",{version:3,sources:["/Users/Alex_K/Dropbox/Development/Portfolio/leadcloud-v5/client/src/components/Navigation/Navigation.css"],names:[],mappings:"AAAA,cACE,cAAiB,AACjB,eAAmB,CACpB,AAED,YACE,uCAAyC,AACzC,sBAAyB,CAC1B,AAED,eACE,kBAAmB,AACnB,WAAY,AACZ,WAAa,CACd,AAED,mBACE,oBAAqB,AACrB,aAAc,AACd,uBAAwB,AACpB,mBAAoB,AACxB,sBAAuB,AACnB,kBAAoB,CACzB",file:"Navigation.css",sourcesContent:[".NavContainer {\n  margin-left: 0px;\n  border-radius: 0px;\n}\n\n.menuItem a {\n  background-color: transparent !important;\n  outline: none !important;\n}\n\n.navProfilePic {\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n}\n\n.navContainerRight {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: row;\n      flex-direction: row;\n  -ms-flex-align: center;\n      align-items: center;\n}\n"],sourceRoot:""}])},693:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,c){try{var i=e[a](c),u=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}n.d(e,"l",function(){return d}),n.d(e,"i",function(){return v}),n.d(e,"a",function(){return y}),n.d(e,"b",function(){return x}),n.d(e,"c",function(){return C}),n.d(e,"k",function(){return w}),n.d(e,"h",function(){return A}),n.d(e,"o",function(){return O}),n.d(e,"f",function(){return k}),n.d(e,"m",function(){return R}),n.d(e,"n",function(){return S}),n.d(e,"p",function(){return N}),n.d(e,"d",function(){return T}),n.d(e,"g",function(){return j}),n.d(e,"j",function(){return L}),n.d(e,"e",function(){return I});var a=n(256),c=n.n(a),i=n(255),u=n.n(i),o=n(139),s=n(23),l=n(697),p=this,f=function(t,e,n,r){return{type:s.v,contacts:t,limit:e,offset:n,query:r}},m=function(t){return{type:s.u,contact:t}},d=function(t){return{type:s.w,payload:t}},g=function(t){return{type:s.x,payload:t}},h=function(){return{type:s.n}},v=function(t){return{type:s.o,isFetching:t}},b=function(t){return{type:s.q,isLoading:t}},y=function(){return{type:s.c}},x=function(){return{type:s.d}},E=function(t){return{type:s.G,error:t}},C=function(){return{type:s.h}},w=function(t,e,n,a,i){return function(){var t=r(c.a.mark(function t(r){var o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.get("/api/contacts/?limit="+e+"&offset="+n+"&query="+a);case 3:o=t.sent,r("listingContacts"===i?Object(l.e)(o.data):f(o.data,e,e,"")),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("fetchContacts ERROR",t.t0.response),r(E("ERROR FETCHING CONTACTS"));case 11:case"end":return t.stop()}},t,p,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},A=function(t,e,n,a){return function(){var i=r(c.a.mark(function r(i){var o,s;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i(b(!0)),o=n+e,r.prev=2,r.next=5,u.a.get("/api/contacts/?limit="+e+"&offset="+n+"&query="+a);case 5:s=r.sent,i(f(t.concat(s.data),e,o,a)),i(v(!1)),i(b(!1)),r.next=16;break;case 11:r.prev=11,r.t0=r.catch(2),console.error("fetchContacts ERROR",r.t0.response),i(v(!1)),i(E("ERROR FETCHING CONTACTS"));case 16:case"end":return r.stop()}},r,p,[[2,11]])}));return function(t){return i.apply(this,arguments)}}()},O=function(t,e,n){return function(){var n=r(c.a.mark(function n(r){var a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(v(!0)),n.prev=1,n.next=4,u.a.get("/api/contacts/loadcontacts");case 4:a=n.sent,200===a.status&&r(A(t,e)),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(1),console.error("Loading contacts from DB unsuccessful",n.t0),r(v(!1)),r(E("ERROR LOADING CONTACTS"));case 13:case"end":return n.stop()}},n,p,[[1,8]])}));return function(t){return n.apply(this,arguments)}}()},k=function(t){return function(){var e=r(c.a.mark(function e(n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/api/contacts/"+t);case 3:r=e.sent,n(m(r.data)),n(v(!1)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Fetching contact unsuccessful",e.t0),n(v(!1)),n(E("ERROR FETCHING CONTACT"));case 13:case"end":return e.stop()}},e,p,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},R=function(t){return function(){var e=r(c.a.mark(function e(n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(v(!0)),e.prev=1,e.next=4,u.a.post("/api/contacts/new",t);case 4:r=e.sent,200===r.status&&(n(m(r.data)),n(Object(o.b)("/contact/"+r.data.id))),n(v(!1)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Submitting new contact unsuccessful",e.t0),n(v(!1)),n(E("ERROR SUBMITTING NEW CONTACT"));case 14:case"end":return e.stop()}},e,p,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},S=function(t){return function(){var e=r(c.a.mark(function e(n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("DATA",t),e.prev=1,e.next=4,u.a.post("/api/contacts/new/openhouse",t);case 4:r=e.sent,200===r.status&&(n(h()),console.log("SUCCESSFULLY SUBMITTED",r.data)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Submitting new contact unsuccessful",e.t0),n(E("ERROR SUBMITTING NEW CONTACT"));case 12:case"end":return e.stop()}},e,p,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},N=function(t,e){return function(){var n=r(c.a.mark(function n(r){var a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.patch("/api/contacts/"+e+"/update",t);case 3:a=n.sent,r(m(a.data)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("Updating Contact Unsuccessful",n.t0);case 10:case"end":return n.stop()}},n,p,[[0,7]])}));return function(t){return n.apply(this,arguments)}}()},T=function(t){return function(){var e=r(c.a.mark(function e(n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.delete("/api/contacts/"+t+"/delete");case 3:r=e.sent,n(m(r.data)),n(Object(o.b)("/contacts")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Deleting Contact Unsuccessful",e.t0);case 11:case"end":return e.stop()}},e,p,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},j=function(t){return function(){var e=r(c.a.mark(function e(n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("FETCHING CONTACT GROUPS",t),e.next=4,u.a.post("/api/contacts/groups",{contactGroups:t});case 4:r=e.sent,console.log("FETCHING RES",r.data),n(g(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Fetching contact groups from API unsuccessful",e.t0);case 12:case"end":return e.stop()}},e,p,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()},L=function(t,e){return function(){var n=r(c.a.mark(function n(r){var a,i;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.post("/api/upload",{componentType:"contact",componentId:e});case 2:return a=n.sent,n.next=5,u.a.put(a.data.url,t[0],{headers:{"Content-Type":t[0].type}});case 5:return n.next=7,u.a.post("/api/contacts/images",{images:["https://s3.amazonaws.com/leadcloud-v5-user-images/"+a.data.key],componentId:e});case 7:i=n.sent,r(m(i.data));case 9:case"end":return n.stop()}},n,p)}));return function(t){return n.apply(this,arguments)}}()},I=function(t,e){return function(){var n=r(c.a.mark(function n(r){var a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.post("/api/contacts/images/delete",{contactId:e,image:t});case 3:a=n.sent,r(m(a.data)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:case"end":return n.stop()}},n,p,[[0,7]])}));return function(t){return n.apply(this,arguments)}}()}},696:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=n(253),i=function(t){var e=t.input,n=t.label,r=t.placeholder,i=t.type,u=t.meta,o=u.touched,s=u.active,l=u.error;return a.a.createElement("div",null,n&&a.a.createElement(c.c,null,n),a.a.createElement(c.e,Object.assign({},e,{placeholder:r,label:n,type:i})),o&&!s&&l&&a.a.createElement("div",null,l))};e.a=i},697:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,c){try{var i=e[a](c),u=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}n.d(e,"e",function(){return d}),n.d(e,"a",function(){return g}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return b}),n.d(e,"f",function(){return y}),n.d(e,"b",function(){return x});var a=n(256),c=n.n(a),i=n(255),u=n.n(i),o=n(693),s=n(687),l=n(23),p=n(140),f=this,m=function(t){return{type:l.M,payload:t}},d=function(t){return{type:l.N,payload:t}},g=function(){return{type:l.m}},h=function(){return{type:l.n}},v=function(t){return function(){var e=r(c.a.mark(function e(n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(s.h)(!0)),e.prev=1,e.next=4,u.a.post("/api/listings/fetchListingContacts",{listingId:t});case 4:r=e.sent,200===r.status&&n(m(r.data)),n(Object(s.h)(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Fetching listing contacts unsuccessful",e.t0),n(Object(s.h)(!1));case 13:case"end":return e.stop()}},e,f,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},b=function(t){var e=p.a.getState(),n=t.nativeEvent.target.defaultValue,r=e.listingReducer.listingContactsSearchResults;n.length<1&&p.a.dispatch(g()),n.length>=1&&p.a.dispatch(Object(o.k)(r,25,0,n,"listingContacts")),n||p.a.dispatch(g())},y=function(t,e){return function(){var n=r(c.a.mark(function n(r){var a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("SUBMIT LISTING CONTACT"),r(Object(s.h)(!0)),n.prev=2,n.next=5,u.a.post("/api/listings/setListingContacts",{contactId:t,listingId:e});case 5:a=n.sent,r(m(a.data)),r(g()),r(h()),r(Object(s.h)(!1)),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(2),console.error("Setting listing contacts unsuccessful",n.t0),r(Object(s.h)(!1));case 16:case"end":return n.stop()}},n,f,[[2,12]])}));return function(t){return n.apply(this,arguments)}}()},x=function(t,e){return function(){var n=r(c.a.mark(function n(r){var a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(Object(s.h)(!0)),n.prev=1,n.next=4,u.a.post("/api/listings/deleteListingContact",{contactId:t,listingId:e});case 4:a=n.sent,r(m(a.data)),r(g()),r(Object(s.h)(!1)),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),console.error("Deleting listing contacts unsuccessful",n.t0),r(Object(s.h)(!1));case 14:case"end":return n.stop()}},n,f,[[1,10]])}));return function(t){return n.apply(this,arguments)}}()}},698:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,c){try{var i=e[a](c),u=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}n.d(e,"e",function(){return d}),n.d(e,"a",function(){return g}),n.d(e,"d",function(){return v}),n.d(e,"c",function(){return b}),n.d(e,"f",function(){return y}),n.d(e,"b",function(){return x});var a=n(256),c=n.n(a),i=n(255),u=n.n(i),o=n(687),s=n(693),l=n(23),p=n(140),f=this,m=function(t){return{type:l.z,payload:t}},d=function(t){return{type:l.A,payload:t}},g=function(){return{type:l.e}},h=function(){return{type:l.n}},v=function(t){var e=p.a.getState(),n=t.nativeEvent.target.defaultValue,r=e.contactReducer.contactListingsSearchResults;n.length<1&&p.a.dispatch(g()),n.length>=1&&p.a.dispatch(Object(o.j)(r,25,0,n,"contactListings")),n||p.a.dispatch(g())},b=function(t){return function(){var e=r(c.a.mark(function e(n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(s.i)(!0)),e.prev=1,e.next=4,u.a.post("/api/contacts/fetchContactListings",{contactId:t});case 4:r=e.sent,200===r.status&&n(m(r.data)),n(Object(s.i)(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Fetching listing contacts unsuccessful",e.t0),n(Object(s.i)(!1));case 13:case"end":return e.stop()}},e,f,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},y=function(t,e){return function(){var n=r(c.a.mark(function n(r){var a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(Object(s.i)(!0)),n.prev=1,n.next=4,u.a.post("/api/contacts/setContactListing",{contactId:e,listingId:t});case 4:a=n.sent,r(m(a.data)),r(g()),r(h()),r(Object(s.i)(!1)),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),console.error("Setting listing contacts unsuccessful",n.t0),r(Object(s.i)(!1));case 15:case"end":return n.stop()}},n,f,[[1,11]])}));return function(t){return n.apply(this,arguments)}}()},x=function(t,e){return function(){var n=r(c.a.mark(function n(r){var a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(Object(s.i)(!0)),n.prev=1,n.next=4,u.a.post("/api/contacts/deleteContactListing",{listingId:t,contactId:e});case 4:a=n.sent,console.log("DELETE RES",a.data),r(m(a.data)),r(Object(s.i)(!1)),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),console.error("Deleting listing contacts unsuccessful",n.t0),r(Object(s.i)(!1));case 14:case"end":return n.stop()}},n,f,[[1,10]])}));return function(t){return n.apply(this,arguments)}}()}},699:function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"b",function(){return p}),n.d(e,"d",function(){return f}),n.d(e,"a",function(){return m});var r=n(255),a=(n.n(r),n(23)),c=n(687),i=n(140),u=function(t){return{type:a.s,payload:t}},o=function(t){return{type:a.t,payload:t}},s=function(){return{type:a.b}},l=function(t){return{type:a.o,isFetching:t}},p=function(t){var e=i.a.getState(),n=t.nativeEvent.target.defaultValue,r=e.campaignReducer.campaignListingsSearchResults;n.length<1&&i.a.dispatch(s()),n.length>=1&&i.a.dispatch(Object(c.j)(r,25,0,n,"campaignListings")),n||i.a.dispatch(s())},f=function(t){var e=i.a.getState();i.a.dispatch(l(!0));var n=e.campaignReducer.campaignListings.slice();try{n.push(t),i.a.dispatch(u(n)),i.a.dispatch(s()),i.a.dispatch(l(!1))}catch(t){console.error("Setting campaign listing unsuccessful",t),i.a.dispatch(l(!1))}},m=function(t){var e=i.a.getState(),n=e.campaignReducer.campaignListings.slice();try{n.splice(n.indexOf(t),1),i.a.dispatch(u(n)),i.a.dispatch(l(!1))}catch(t){console.error("Deleting listing contacts unsuccessful",t),i.a.dispatch(l(!1))}}},707:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=n(718),i=n.n(c),u=n(258),o=n(253),s=n(696),l=function(t){var e=(t.load,t.pristine,t.reset,t.onChange,t.searchFunction);return console.log("SEARCH FUNCTION",e),a.a.createElement(o.f,null,a.a.createElement(u.a,{type:"text",name:"contactSearch",component:s.a,placeholder:"Search...",onChange:i()(e,500)}))};e.a=Object(u.c)({form:"searchForm",enableReinitialize:!0})(l)},718:function(t,e,n){(function(e){function n(t,e,n){function a(e){var n=g,r=h;return g=h=void 0,A=e,b=t.apply(r,n)}function c(t){return A=t,y=setTimeout(l,e),O?a(t):b}function o(t){var n=t-w,r=t-A,a=e-n;return k?E(a,v-r):a}function s(t){var n=t-w,r=t-A;return void 0===w||n>=e||n<0||k&&r>=v}function l(){var t=C();if(s(t))return p(t);y=setTimeout(l,o(t))}function p(t){return y=void 0,R&&g?a(t):(g=h=void 0,b)}function f(){void 0!==y&&clearTimeout(y),A=0,g=w=h=y=void 0}function m(){return void 0===y?b:p(C())}function d(){var t=C(),n=s(t);if(g=arguments,h=this,w=t,n){if(void 0===y)return c(w);if(k)return y=setTimeout(l,e),a(w)}return void 0===y&&(y=setTimeout(l,e)),b}var g,h,v,b,y,w,A=0,O=!1,k=!1,R=!0;if("function"!=typeof t)throw new TypeError(u);return e=i(e)||0,r(n)&&(O=!!n.leading,k="maxWait"in n,v=k?x(i(n.maxWait)||0,e):v,R="trailing"in n?!!n.trailing:R),d.cancel=f,d.flush=m,d}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return!!t&&"object"==typeof t}function c(t){return"symbol"==typeof t||a(t)&&y.call(t)==s}function i(t){if("number"==typeof t)return t;if(c(t))return o;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var n=f.test(t);return n||m.test(t)?d(t.slice(2),n?2:8):p.test(t)?o:+t}var u="Expected a function",o=NaN,s="[object Symbol]",l=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,m=/^0o[0-7]+$/i,d=parseInt,g="object"==typeof e&&e&&e.Object===Object&&e,h="object"==typeof self&&self&&self.Object===Object&&self,v=g||h||Function("return this")(),b=Object.prototype,y=b.toString,x=Math.max,E=Math.min,C=function(){return v.Date.now()};t.exports=n}).call(e,n(60))},719:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,c){try{var i=e[a](c),u=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}n.d(e,"b",function(){return p}),n.d(e,"a",function(){return d}),n.d(e,"e",function(){return h}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return b});var a=n(256),c=n.n(a),i=n(255),u=n.n(i),o=n(23),s=this,l=function(t,e,n,r){return{type:o.I,groups:t,limit:e,offset:n,query:r}},p=function(){return{type:o.i}},f=function(t){return{type:o.H,payload:t}},m=function(t){return{type:o.J,payload:t}},d=function t(){return{type:o.j,payload:t}},g=function(t){return{type:o.o,payload:t}},h=function(t,e,n,a){return function(){var i=r(c.a.mark(function r(i){var o,p;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i(g(!0)),o=n+e,r.prev=2,r.next=5,u.a.get("/api/groups/?limit="+e+"&offset="+n+"&query="+a);case 5:p=r.sent,i(l(t.concat(p.data),e,o,a)),i(g(!1)),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(2),console.error("Fetching groups unsuccessful",r.t0),i(g(!1));case 14:case"end":return r.stop()}},r,s,[[2,10]])}));return function(t){return i.apply(this,arguments)}}()},v=function(t){return function(){var e=r(c.a.mark(function e(n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(g(!0)),e.prev=1,e.next=4,u.a.get("/api/groups/"+t);case 4:r=e.sent,n(f(r.data)),n(g(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Fetching groups unsuccessful",e.t0),n(g(!1));case 13:case"end":return e.stop()}},e,s,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},b=function(t){return function(){var e=r(c.a.mark(function e(n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(g(!0)),e.prev=1,e.next=4,u.a.get("/api/groups/"+t+"/contacts");case 4:r=e.sent,n(m(r.data)),n(g(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Fetching groups unsuccessful",e.t0),n(g(!1));case 13:case"end":return e.stop()}},e,s,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()}},720:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){var e={};return t.fullname?/^[a-z]([-']?[a-z]+)*( [a-z]([-']?[a-z]+)*)+( )*$/i.test(t.fullname)||(e.fullname="Please enter full name"):e.fullname="Required",t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/i.test(t.email)||(e.email="Please enter a valid email address"):e.email="Required",t.phone?/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/i.test(t.phone)||(e.phone="Please enter a valid phone number"):e.phone="",e}},798:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=n(254),i=n(253),u=function(t){var e=t.componentName,n=t.collection,r=t.submitFunction,u=(t.hostComponent,t.contact),o=(t.listing,t.buttonText),s=t.buttonStyle,l=t.rowText;return console.log("component",u),a.a.createElement(i.o,{striped:!0},a.a.createElement("tbody",null,n&&n.map(function(t){return a.a.createElement("tr",{key:t.id},a.a.createElement("td",null,t&&t.images?a.a.createElement("div",{className:"tableImg"},a.a.createElement("img",{src:t.images[0],alt:"contact"})):a.a.createElement("div",{className:"tableImgNull"},a.a.createElement("span",null,t&&t[l]?t[l].charAt(0).toUpperCase():null))),a.a.createElement("td",null,a.a.createElement(c.a,{to:"/"+e+"/"+t.id},a.a.createElement("span",null,t[l]))),a.a.createElement("td",null,a.a.createElement(i.a,{className:"addButton",bsStyle:s,onClick:function(){return r(t)}},a.a.createElement("span",null,o))))})))};e.a=u},844:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=(n(24),n(1)),i=(n.n(c),n(258)),u=n(253),o=n(720),s=n(798),l=n(707),p=n(696),f=void 0;f=function(t){var e=(t.handleSubmit,t.load,t.pristine),n=(t.reset,t.submitting),r=(t.auditClick,t.campaign),c=t.campaignListings,o=t.searchCampaignListings,f=t.campaignListingsSearchResults,m=t.submitCampaignListing,d=t.deleteCampaignListing,g=t.nextPage;return a.a.createElement(u.d,null,a.a.createElement(u.g,null,a.a.createElement(u.n,null,a.a.createElement(u.b,{xs:12},a.a.createElement("h2",null,"New Campaign")),a.a.createElement(u.b,{xs:12},a.a.createElement(u.f,{className:"formGroup"},a.a.createElement(i.a,{type:"text",name:"title",component:p.a,label:"Title"})))),a.a.createElement(u.n,null,a.a.createElement(u.b,{xs:12},a.a.createElement("h3",null,"Search Listings"),a.a.createElement(l.a,{searchFunction:o})),a.a.createElement(u.b,{xs:12},a.a.createElement(s.a,{componentName:"campaignListings",rowText:"address",collection:c,submitFunction:d,hostComponent:r,buttonText:"Delete Listing",buttonStyle:"danger"})),a.a.createElement(u.b,{xs:12},a.a.createElement(s.a,{componentName:"campaignListings",rowText:"address",collection:f,submitFunction:m,hostComponent:r,buttonText:"Add Listing",buttonStyle:"warning"}))),a.a.createElement(u.n,null,a.a.createElement(u.b,{xs:12},a.a.createElement("div",null,a.a.createElement(u.a,{onClick:g,className:"submitButton",type:"button",bsStyle:"primary",disabled:e||n},a.a.createElement("span",null,"Next")))))))},f=Object(i.c)({form:"campaignForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:o.a})(f),e.a=f},845:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=(n(24),n(1)),i=(n.n(c),n(258)),u=n(253),o=n(720),s=(n(798),n(707),n(696),void 0);s=function(t){var e=(t.handleSubmit,t.load,t.pristine),n=(t.reset,t.submitting),r=(t.auditClick,t.campaignListings),c=t.nextPage,i=t.prevPage;return a.a.createElement(u.d,null,a.a.createElement(u.g,null,a.a.createElement(u.n,null,a.a.createElement(u.b,{xs:12},a.a.createElement("h2",null,"Format Template")),a.a.createElement(u.b,{xs:12},a.a.createElement("div",null,r.map(function(t){return a.a.createElement("div",null,a.a.createElement("h3",null,t.address))})))),a.a.createElement(u.n,null,a.a.createElement(u.b,{xs:6},a.a.createElement("div",null,a.a.createElement(u.a,{onClick:i,className:"submitButton",type:"button",bsStyle:"primary",disabled:e||n},a.a.createElement("span",null,"Previous")))),a.a.createElement(u.b,{xs:6},a.a.createElement("div",null,a.a.createElement(u.a,{onClick:c,className:"submitButton",type:"button",bsStyle:"primary",disabled:e||n},a.a.createElement("span",null,"Next")))))))},s=Object(i.c)({form:"campaignForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:o.a})(s),e.a=s},846:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=(n(24),n(1)),i=(n.n(c),n(258)),u=n(253),o=n(720),s=n(798),l=(n(707),n(696),void 0);l=function(t){var e=t.handleSubmit,n=(t.load,t.pristine),r=(t.reset,t.submitting),c=(t.auditClick,t.campaign),i=t.campaignGroups,o=t.groups,l=t.submitCampaignGroup,p=t.deleteCampaignGroup,f=(t.onSubmit,t.prevPage);return a.a.createElement(u.d,{onSubmit:e},a.a.createElement(u.g,null,a.a.createElement(u.n,null,a.a.createElement(u.b,{xs:12},a.a.createElement("h3",null,"Select Groups")),a.a.createElement(u.b,{xs:12},a.a.createElement(s.a,{componentName:"groups",rowText:"title",collection:i,submitFunction:p,hostComponent:c,buttonText:"Delete Group",buttonStyle:"danger"})),a.a.createElement(u.b,{xs:12},a.a.createElement(s.a,{componentName:"groups",rowText:"title",collection:o,submitFunction:l,hostComponent:c,buttonText:"Add Group",buttonStyle:"warning"}))),a.a.createElement(u.n,null,a.a.createElement(u.b,{xs:6},a.a.createElement("div",null,a.a.createElement(u.a,{onClick:f,className:"submitButton",type:"button",bsStyle:"primary",disabled:n||r},a.a.createElement("span",null,"Previous")))),a.a.createElement(u.b,{xs:6},a.a.createElement("div",null,a.a.createElement(u.a,{className:"submitButton",type:"submit",bsStyle:"primary",disabled:n||r},a.a.createElement("span",null,"Submit")))))))},l=Object(i.c)({form:"campaignForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,validate:o.a})(l),e.a=l},847:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return o});var r=n(23),a=n(140),c=function(t){return console.log("CAMPAIGN GROUPS ACTION",t),{type:r.r,payload:t}},i=function(t){return{type:r.o,isFetching:t}},u=function(t){var e=a.a.getState();a.a.dispatch(i(!0));var n=e.campaignReducer.campaignGroups.slice();try{n.includes(t)||n.push(t),a.a.dispatch(c(n)),a.a.dispatch(i(!1))}catch(t){console.error("Setting campaign group unsuccessful",t),a.a.dispatch(i(!1))}},o=function(t){var e=a.a.getState(),n=e.campaignReducer.campaignGroups.slice();try{n.splice(n.indexOf(t),1),a.a.dispatch(c(n)),a.a.dispatch(i(!1))}catch(t){console.error("Deleting campiagn group unsuccessful",t),a.a.dispatch(i(!1))}}}});
//# sourceMappingURL=5.bf93fee0.chunk.js.map